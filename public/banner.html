<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Banner - Dezent schicker</title>
    <style>
        body {
            margin: 0;
            font-family: system-ui, sans-serif;
            background: white;
            color: #333;
            padding: 40px 20px;
            min-height: 100vh;
        }
        
        .demo-content {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .demo-content h1 {
            color: #7c3aed;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .demo-content p {
            color: #666;
            margin-bottom: 2rem;
        }
        
        .test-button {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="demo-content">
        <h1>üç™ Cookie Banner</h1>
        <p>Dein urspr√ºnglicher Code, nur etwas h√ºbscher gemacht.</p>
        <button class="test-button" onclick="document.getElementById('cookie-banner').style.display='block'">
            Cookie-Banner anzeigen
        </button>
    </div>

    <!-- Cookie Banner - nur dezent verbessert -->
    <div id="cookie-banner" style="position:fixed;inset:auto 0 0 0;background:#1f2937;color:#fff;padding:20px;z-index:9999;font:15px/1.4 system-ui;display:none;box-shadow:0 -4px 20px rgba(0,0,0,0.15)">
        <div style="max-width:900px;margin:0 auto;display:flex;gap:16px;align-items:center;flex-wrap:wrap">
            <div style="flex:1">
                <strong style="display:block;margin-bottom:4px">üç™ Cookie-Einstellungen</strong>
                Wir verwenden Cookies f√ºr grundlegende Funktionen und ‚Äì nur mit deiner Zustimmung ‚Äì f√ºr Statistik & Marketing.
                <a href="/datenschutz.html" style="color:#a78bfa;text-decoration:underline">Mehr erfahren</a>
            </div>
            <button id="cb-reject" style="background:#4b5563;color:#fff;border:0;padding:12px 16px;border-radius:6px;cursor:pointer;font-size:14px">Nur notwendig</button>
            <button id="cb-customize" style="background:#6b7280;color:#fff;border:0;padding:12px 16px;border-radius:6px;cursor:pointer;font-size:14px">Einstellungen</button>
            <button id="cb-accept" style="background:#7c3aed;color:#fff;border:0;padding:12px 18px;border-radius:6px;font-weight:600;cursor:pointer;font-size:14px">Alle akzeptieren</button>
        </div>
    </div>

    <!-- Modal - auch nur dezent verbessert -->
    <div id="cookie-modal" style="position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;z-index:10000">
        <div style="background:#fff;color:#111;max-width:520px;margin:10vh auto;padding:24px;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,0.2)">
            <h3 style="margin:0 0 16px 0;color:#1f2937;font-size:18px">Cookie-Einstellungen</h3>
            
            <label style="display:block;margin:12px 0;padding:12px;background:#f9fafb;border-radius:6px;cursor:not-allowed;opacity:0.7">
                <input type="checkbox" checked disabled style="margin-right:8px"> 
                <strong>Notwendig</strong> (immer aktiv)
                <br><small style="color:#6b7280">F√ºr Grundfunktionen erforderlich</small>
            </label>
            
            <label style="display:block;margin:12px 0;padding:12px;background:#f9fafb;border-radius:6px;cursor:pointer">
                <input id="cons-stat" type="checkbox" style="margin-right:8px;accent-color:#7c3aed"> 
                <strong>Statistik</strong>
                <br><small style="color:#6b7280">Zur Verbesserung der Website</small>
            </label>
            
            <label style="display:block;margin:12px 0;padding:12px;background:#f9fafb;border-radius:6px;cursor:pointer">
                <input id="cons-mark" type="checkbox" style="margin-right:8px;accent-color:#7c3aed"> 
                <strong>Marketing</strong> (Meta/TikTok/Clarity)
                <br><small style="color:#6b7280">F√ºr personalisierte Werbung</small>
            </label>
            
            <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:20px">
                <button onclick="document.getElementById('cookie-modal').style.display='none'" style="background:#f3f4f6;color:#6b7280;border:0;padding:10px 14px;border-radius:6px;cursor:pointer">Abbrechen</button>
                <button id="cb-save" style="background:#7c3aed;color:#fff;border:0;padding:10px 16px;border-radius:6px;cursor:pointer;font-weight:500">Speichern</button>
            </div>
        </div>
    </div>

    <script>
    (function(){
        const KEY = 'consent_v1';
        const elBanner = document.getElementById('cookie-banner');
        const elModal = document.getElementById('cookie-modal');
        
        function getConsent(){
            try{ return JSON.parse(localStorage.getItem(KEY) || '{}'); }catch(e){ return {}; }
        }
        
        function setConsent(obj){
            localStorage.setItem(KEY, JSON.stringify({ ...obj, ts: Date.now() }));
        }
        
        function hasAnyDecision(){
            const c = getConsent();
            return typeof c.necessary !== 'undefined';
        }
        
        function showBanner(){ elBanner.style.display='block'; }
        function hideBanner(){ elBanner.style.display='none'; }
        
        // Buttons
        document.getElementById('cb-accept').onclick = function(){
            setConsent({ necessary:true, statistics:true, marketing:true });
            hideBanner(); window.dispatchEvent(new Event('consentchange'));
        };
        
        document.getElementById('cb-reject').onclick = function(){
            setConsent({ necessary:true, statistics:false, marketing:false });
            hideBanner(); window.dispatchEvent(new Event('consentchange'));
        };
        
        document.getElementById('cb-customize').onclick = function(){
            elModal.style.display='block';
            document.getElementById('cons-stat').checked = !!getConsent().statistics;
            document.getElementById('cons-mark').checked = !!getConsent().marketing;
        };
        
        document.getElementById('cb-save').onclick = function(){
            setConsent({
                necessary:true,
                statistics: document.getElementById('cons-stat').checked,
                marketing: document.getElementById('cons-mark').checked
            });
            elModal.style.display='none'; hideBanner(); window.dispatchEvent(new Event('consentchange'));
        };
        
        // Modal schlie√üen bei Klick au√üerhalb
        elModal.onclick = function(e) {
            if (e.target === elModal) {
                elModal.style.display = 'none';
            }
        };
        
        // Link zum sp√§teren √Ñndern
        window.openCookieSettings = function(){ elModal.style.display='block'; };
        
        // Start: Banner zeigen, wenn keine Entscheidung
        if(!hasAnyDecision()) showBanner();
    })();
    </script>
</body>
</html>