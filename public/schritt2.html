<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞–≥ 1: –í–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</title>
    
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1209936897673430');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1209936897673430&ev=PageView&noscript=1"
    /></noscript>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Inter", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            min-height: 100vh;
            color: #2D3748;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .progress-container {
            background: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e3c72;
        }

        .progress-step {
            background: #f0f9ff;
            color: #1e3c72;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            height: 100%;
            width: 33%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .form-container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }

        h1 {
            font-size: 28px;
            color: #1a202c;
            margin-bottom: 10px;
            font-weight: 700;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #4a5568;
            font-size: 16px;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .form-section {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e2e8f0;
        }

        .form-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-info {
            color: #718096;
            font-size: 13px;
            margin-bottom: 15px;
            font-style: italic;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
            font-size: 14px;
        }

        .required {
            color: #e53e3e;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            background: #ffffff;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .next-button {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(30, 60, 114, 0.3);
        }

        .next-button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .security-note {
            text-align: center;
            color: #718096;
            font-size: 12px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .error-message {
            color: #e53e3e;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .form-group.error input,
        .form-group.error select {
            border-color: #e53e3e;
        }

        .form-group.error .error-message {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .form-container {
                padding: 25px 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            h1 {
                font-size: 24px;
            }

            .subtitle {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="progress-title">–°–µ—Ä–≤–∏—Å –∑–∞—è–≤–ª–µ–Ω–∏–π ¬ß24</div>
                <div class="progress-step">–®–∞–≥ 1 –∏–∑ 3</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>

        <!-- Form -->
        <div class="form-container">
            <h1>–í–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h1>
            <p class="subtitle">–ù–∞–º –Ω—É–∂–Ω–∞ —ç—Ç–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –í–∞—à–∏—Ö –∑–∞—è–≤–ª–µ–Ω–∏–π ¬ß24</p>

            <form id="personalDataForm">
                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                <div class="form-section">
                    <div class="section-title">üë§ 1. –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vorname">–ò–º—è <span class="required">*</span></label>
                            <input type="text" id="vorname" name="vorname" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, –û–ª–µ–Ω–∞" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –í–∞—à–µ –∏–º—è</div>
                        </div>
                        <div class="form-group">
                            <label for="nachname">–§–∞–º–∏–ª–∏—è <span class="required">*</span></label>
                            <input type="text" id="nachname" name="nachname" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–≤–∞–Ω–æ–≤–∞" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –í–∞—à—É —Ñ–∞–º–∏–ª–∏—é</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="geburtsdatum">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è <span class="required">*</span></label>
                            <input type="date" id="geburtsdatum" name="geburtsdatum" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è</div>
                        </div>
                        <div class="form-group">
                            <label for="geburtsort">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è <span class="required">*</span></label>
                            <input type="text" id="geburtsort" name="geburtsort" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, –ö–∏–µ–≤" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="staatsangehoerigkeit">–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ <span class="required">*</span></label>
                            <select id="staatsangehoerigkeit" name="staatsangehoerigkeit" required>
                                <option value="">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ</option>
                                <option value="ukraine">–£–∫—Ä–∞–∏–Ω–∞</option>
                                <option value="russland">–†–æ—Å—Å–∏—è</option>
                                <option value="belarus">–ë–µ–ª–∞—Ä—É—Å—å</option>
                                <option value="sonstige">–î—Ä—É–≥–æ–µ</option>
                            </select>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –í–∞—à–µ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ</div>
                        </div>
                        <div class="form-group">
                            <label for="geschlecht">–ü–æ–ª <span class="required">*</span></label>
                            <select id="geschlecht" name="geschlecht" required>
                                <option value="">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ</option>
                                <option value="weiblich">–ñ–µ–Ω—Å–∫–∏–π</option>
                                <option value="maennlich">–ú—É–∂—Å–∫–æ–π</option>
                                <option value="divers">–î—Ä—É–≥–æ–µ</option>
                            </select>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –í–∞—à –ø–æ–ª</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="familienstand">–°–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ <span class="required">*</span></label>
                        <select id="familienstand" name="familienstand" required>
                            <option value="">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ</option>
                            <option value="ledig">–•–æ–ª–æ—Å—Ç/–Ω–µ –∑–∞–º—É–∂–µ–º</option>
                            <option value="verheiratet">–ñ–µ–Ω–∞—Ç/–∑–∞–º—É–∂–µ–º</option>
                            <option value="geschieden">–†–∞–∑–≤–µ–¥–µ–Ω/—Ä–∞–∑–≤–µ–¥–µ–Ω–∞</option>
                            <option value="verwitwet">–í–¥–æ–≤–µ—Ü/–≤–¥–æ–≤–∞</option>
                        </select>
                        <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ</div>
                    </div>
                </div>

                <!-- –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                <div class="form-section">
                    <div class="section-title">üìã 2. –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                    <p class="section-info">–î–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–ª–µ–Ω–∏—è ¬ß24 –Ω–∞–º –Ω—É–∂–Ω—ã –í–∞—à–∏ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="passnummer">–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞ <span class="required">*</span></label>
                            <input type="text" id="passnummer" name="passnummer" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, ER123456" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞</div>
                        </div>
                        <div class="form-group">
                            <label for="ausstellungsort">–ú–µ—Å—Ç–æ –≤—ã–¥–∞—á–∏ <span class="required">*</span></label>
                            <input type="text" id="ausstellungsort" name="ausstellungsort" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, –ö–∏–µ–≤" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –º–µ—Å—Ç–æ –≤—ã–¥–∞—á–∏</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="ausstellungsdatum">–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏ <span class="required">*</span></label>
                            <input type="date" id="ausstellungsdatum" name="ausstellungsdatum" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –≤—ã–¥–∞—á–∏</div>
                        </div>
                        <div class="form-group">
                            <label for="gueltig_bis">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ <span class="required">*</span></label>
                            <input type="date" id="gueltig_bis" name="gueltig_bis" required>
                            <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</div>
                        </div>
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                <div class="form-section">
                    <div class="section-title">üìû 3. –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
                    
                    <div class="form-group">
                        <label for="telefon">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (WhatsApp) <span class="required">*</span></label>
                        <input type="tel" id="telefon" name="telefon" placeholder="+380 67 123 4567" required>
                        <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
                    </div>

                    <div class="form-group">
                        <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ <span class="required">*</span></label>
                        <input type="email" id="email" name="email" placeholder="olena@example.com" required>
                        <div class="error-message">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π email</div>
                    </div>
                </div>

                <button type="submit" class="next-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ —à–∞–≥—É 2 ‚Üí</button>

                <div class="security-note">
                    üîí –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ
                </div>
            </form>
        </div>
    </div>

    <script>
        // Store UTM params
        function getUTMParams() {
            const urlParams = new URLSearchParams(window.location.search);
            return {
                utm_source: urlParams.get('utm_source') || '',
                utm_medium: urlParams.get('utm_medium') || '',
                utm_campaign: urlParams.get('utm_campaign') || '',
                utm_term: urlParams.get('utm_term') || '',
                utm_content: urlParams.get('utm_content') || '',
                fcb: urlParams.get('fcb') || '',
                fbp: urlParams.get('fbp') || ''
            };
        }

        const utmParams = getUTMParams();
        localStorage.setItem('utmParams', JSON.stringify(utmParams));
        
        // User session
        const userId = localStorage.getItem('userId') || `user_${Date.now()}`;
        localStorage.setItem('userId', userId);

        // Track page load
        window.addEventListener('load', function() {
            console.log('=== –®–ê–ì–ò 1 - –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï –ó–ê–ì–†–£–ñ–ï–ù–´ (–†–£–°–°–ö–ò–ô) ===');
            
            // Google Analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'begin_checkout', {
                    'event_category': 'form_filling_russian',
                    'event_label': 'personal_data_step1_ru',
                    'checkout_step': 1,
                    'language': 'russian'
                });
            }

            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'InitiateCheckout', {
                    content_category: 'arbeitserlaubnis_checkout_russian',
                    content_name: 'Personal Data Step 1 Russian',
                    num_items: 1,
                    custom_data: {
                        language: 'russian'
                    }
                });
            }
        });

        // Form validation and submission
        document.getElementById('personalDataForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate form
            if (!validateForm()) {
                return;
            }
            
            // Save form data
            const formData = new FormData(this);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            localStorage.setItem('personalData', JSON.stringify(data));
            localStorage.setItem('step1_completed', 'true');
            localStorage.setItem('language', 'russian');
            
            console.log('=== –®–ê–ì–ò 1 –ó–ê–í–ï–†–®–Å–ù (–†–£–°–°–ö–ò–ô) ===', data);
            
            // Track completion
            if (typeof gtag !== 'undefined') {
                gtag('event', 'checkout_progress', {
                    'event_category': 'form_filling_russian',
                    'checkout_step': 1,
                    'checkout_option': 'personal_data_completed_ru'
                });
            }

            if (typeof fbq !== 'undefined') {
                fbq('track', 'AddToCart', {
                    content_category: 'arbeitserlaubnis_step1_russian',
                    content_name: 'Personal Data Completed Russian'
                });
            }
            
            // Redirect to step 2
            setTimeout(() => {
                window.location.href = '/schritt3-russian.html';
            }, 200);
        });

        function validateForm() {
            let isValid = true;
            
            // Remove previous error states
            document.querySelectorAll('.form-group').forEach(group => {
                group.classList.remove('error');
            });
            
            // Check required fields
            const requiredFields = ['vorname', 'nachname', 'geburtsdatum', 'geburtsort', 'geschlecht', 'staatsangehoerigkeit', 'email', 'telefon', 'familienstand', 'passnummer', 'ausstellungsort', 'ausstellungsdatum', 'gueltig_bis'];
            
            requiredFields.forEach(fieldName => {
                const field = document.getElementById(fieldName);
                const group = field.closest('.form-group');
                
                if (!field.value.trim()) {
                    group.classList.add('error');
                    isValid = false;
                }
            });
            
            // Email validation
            const email = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (email.value && !emailRegex.test(email.value)) {
                email.closest('.form-group').classList.add('error');
                isValid = false;
            }
            
            return isValid;
        }

        // Auto-save and restore form data
        document.addEventListener('DOMContentLoaded', function() {
            const savedData = localStorage.getItem('personalData');
            if (savedData) {
                const data = JSON.parse(savedData);
                Object.keys(data).forEach(key => {
                    const field = document.getElementById(key);
                    if (field) {
                        field.value = data[key];
                    }
                });
                console.log('=== –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–´ –î–ê–ù–ù–´–ï ===', data);
            }
        });

        // Auto-save on input with all fields
        document.querySelectorAll('input, select').forEach(field => {
            field.addEventListener('input', function() {
                // Remove error state when user starts typing
                this.closest('.form-group').classList.remove('error');
                
                // Auto-save immediately
                saveAllFormData();
            });
        });

        function saveAllFormData() {
            const formData = new FormData(document.getElementById('personalDataForm'));
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            localStorage.setItem('personalData', JSON.stringify(data));
            localStorage.setItem('personalData_timestamp', Date.now());
            console.log('=== –ê–í–¢–û-–°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• ===', data);
        }

        // Save on page unload as backup
        window.addEventListener('beforeunload', function() {
            saveAllFormData();
        });
    </script>
</body>
</html>